import React, { useEffect, useState } from 'react';

interface HeartLivesProps {
    lives: number;
    maxLives?: number;
}

const HeartLives: React.FC<HeartLivesProps> = ({ lives, maxLives = 5 }) => {
    const [animateIndex, setAnimateIndex] = useState<number | null>(null);

    useEffect(() => {
        if (lives < maxLives) {
            setAnimateIndex(lives);
            const timeout = setTimeout(() => {
                setAnimateIndex(null); // Stop bouncing after 1.5s
            }, 1500);
            return () => clearTimeout(timeout);
        }
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, [lives]);

    return (
        <div className="flex gap-1 flex-wrap justify-evenly">
            {Array.from({ length: maxLives }).map((_, index) => (
                <svg
                    key={index}
                    viewBox="0 0 1920 1920"
                    xmlns="http://www.w3.org/2000/svg"
                    className={`lg:w-10 lg:h-10 w-8 h-8 transition-fill duration-500
                        ${index < lives ? 'fill-red-500' : 'fill-white/10'} 
                            ${index === animateIndex ? 'animate-pulse fill-blue-500' : ''}
                    `}
                >
                    <path className={`drop-shadow-2xl
                        ${index < lives ? 'drop-shadow-red-400' : 'drop-shadow-white stroke-black/80'}
                        `} stroke="white" strokeWidth="10" d="M 360.00,371.00 C 360.00,371.00 798.00,371.00 798.00,371.00 798.00,371.00 797.00,408.00 797.00,408.00 797.00,408.00 797.00,479.00 797.00,479.00 797.00,479.00 905.00,479.00 905.00,479.00 905.00,479.00 905.00,587.00 905.00,587.00 905.00,587.00 1014.00,587.00 1014.00,587.00 1014.00,587.00 1014.00,479.00 1014.00,479.00 1014.00,479.00 1122.00,479.00 1122.00,479.00 1122.00,479.00 1122.00,371.00 1122.00,371.00 1122.00,371.00 1547.00,371.00 1547.00,371.00 1547.00,371.00 1547.00,479.00 1547.00,479.00 1547.00,479.00 1655.00,479.00 1655.00,479.00 1655.00,479.00 1655.00,905.00 1655.00,905.00 1655.00,905.00 1547.00,905.00 1547.00,905.00 1547.00,905.00 1547.00,1013.00 1547.00,1013.00 1547.00,1013.00 1439.00,1013.00 1439.00,1013.00 1439.00,1013.00 1439.00,1121.00 1439.00,1121.00 1439.00,1121.00 1331.00,1121.00 1331.00,1121.00 1331.00,1121.00 1331.00,1228.00 1331.00,1228.00 1331.00,1228.00 1249.00,1228.00 1249.00,1228.00 1249.00,1228.00 1231.00,1228.00 1231.00,1228.00 1231.00,1228.00 1224.60,1229.60 1224.60,1229.60 1224.60,1229.60 1223.00,1238.00 1223.00,1238.00 1223.00,1238.00 1223.00,1336.00 1223.00,1336.00 1223.00,1336.00 1115.00,1336.00 1115.00,1336.00 1115.00,1336.00 1115.00,1444.00 1115.00,1444.00 1115.00,1444.00 1007.00,1444.00 1007.00,1444.00 1007.00,1444.00 1007.00,1552.00 1007.00,1552.00 1007.00,1552.00 900.00,1552.00 900.00,1552.00 900.00,1552.00 900.00,1444.00 900.00,1444.00 900.00,1444.00 792.00,1444.00 792.00,1444.00 792.00,1444.00 792.00,1336.00 792.00,1336.00 792.00,1336.00 684.00,1336.00 684.00,1336.00 684.00,1336.00 684.00,1228.00 684.00,1228.00 684.00,1228.00 576.00,1228.00 576.00,1228.00 576.00,1228.00 576.00,1121.00 576.00,1121.00 576.00,1121.00 468.00,1121.00 468.00,1121.00 468.00,1121.00 468.00,1013.00 468.00,1013.00 468.00,1013.00 396.00,1013.00 396.00,1013.00 396.00,1013.00 360.00,1012.00 360.00,1012.00 360.00,1012.00 361.00,975.00 361.00,975.00 361.00,975.00 361.00,905.00 361.00,905.00 361.00,905.00 253.00,905.00 253.00,905.00 253.00,905.00 253.00,615.00 253.00,615.00 253.00,615.00 253.00,525.00 253.00,525.00 253.00,515.14 253.89,486.78 252.00,479.00 252.00,479.00 361.00,479.00 361.00,479.00 361.00,479.00 361.00,408.00 361.00,408.00 361.00,408.00 360.00,371.00 360.00,371.00 Z M 696.00,478.00 C 696.00,478.00 480.00,478.00 480.00,478.00 480.00,478.00 480.00,586.00 480.00,586.00 480.00,586.00 372.00,586.00 372.00,586.00 372.00,586.00 372.00,802.00 372.00,802.00 372.00,802.00 480.00,802.00 480.00,802.00 480.00,802.00 480.00,694.00 480.00,694.00 480.00,694.00 588.00,694.00 588.00,694.00 588.00,694.00 588.00,586.00 588.00,586.00 588.00,586.00 696.00,586.00 696.00,586.00 696.00,586.00 696.00,478.00 696.00,478.00 Z" />
                    <path className={`drop-shadow-xl drop-shadow-white fill-white `} stroke="white" strokeWidth="10"
                        d="M 480.00,478.00
                        C 480.00,478.00 627.00,478.00 627.00,478.00
                        627.00,478.00 672.00,478.00 672.00,478.00
                        672.00,478.00 696.00,479.00 696.00,479.00
                        694.39,485.63 695.00,494.06 695.00,501.00
                        695.00,501.00 695.00,538.00 695.00,538.00
                        695.00,547.98 694.10,577.18 696.00,585.00
                        696.00,585.00 660.00,586.00 660.00,586.00
                        660.00,586.00 588.00,586.00 588.00,586.00
                        588.00,586.00 588.00,658.00 588.00,658.00
                        588.00,658.00 587.00,694.00 587.00,694.00
                        587.00,694.00 550.00,693.00 550.00,693.00
                        550.00,693.00 480.00,693.00 480.00,693.00
                        480.00,693.00 480.00,801.00 480.00,801.00
                        480.00,801.00 372.00,801.00 372.00,801.00
                        372.00,801.00 372.00,586.00 372.00,586.00
                        372.00,586.00 480.00,586.00 480.00,586.00
                        480.00,586.00 480.00,478.00 480.00,478.00 Z"
                    />

                </svg>
            ))}
        </div>
    );
};

export default HeartLives;
